{% extends "main/base.html" %}

{% block content%}
<div class="pane">
  {% if dataset%}
    <h2>Dataset: <span id="dataset_name">{{ dataset.name }}</span></h2>
    <h3>Key: <span id="dataset_key">{{ dataset.pk }}</span></h3>
    <h3>Owner: {{ dataset.owner.username }}</h3>
    <h3>Species: {{ species_name }}</h3>
    {% if edit %}
    <form method="post">
      {% csrf_token %}
      {{ delete_form }}
      <input type="submit" value="Delete">
    </form>
    <div id="js_message"></div>
    {% endif %}
  {% else %}
    <h2>Sample List</h2>
  {% endif %}
  <div class="overview-row">
    {% if edit %}
    <div class="overview-firstcol-border">
      <input type="checkbox"
      />
    </div>
    {% endif %}
    {% if edit %}
    <div class="overview-header">
    {% else  %}
    <div class="overview-header overview-firstcol-border">
    {% endif %}
    <div class="overview-header-inner-bold">Mongo ID</div>
      <div class="overview-header-inner">
        <span>{filter}</span>
      </div>
    </div>
    <div class="overview-header">
      <div class="overview-header-inner-bold">Name</div>
      <div class="overview-header-inner">
        <span>{filter}</span>
      </div>
    </div>
    <div class="overview-header">
      <div class="overview-header-inner-bold">Species</div>
      <div class="overview-header-inner">
        <span>{{species_name}}</span>
      </div>
    </div>
    <div class="overview-header">
      <div class="overview-header-inner-bold">Country</div>
      <div class="overview-header-inner">
        <span>{filter}</span>
      </div>
    </div>
    <div class="overview-header">
      <div class="overview-header-inner-bold">Source</div>
      <div class="overview-header-inner">
        <span>{filter}</span>
      </div>
    </div>
    <div class="overview-header">
      <div class="overview-header-inner-bold">Year</div>
      <div class="overview-header-inner">
        <span>{filter}</span>
      </div>
    </div>
    <div class="overview-header">
      <div class="overview-header-inner-bold">ST</div>
      <div class="overview-header-inner">
        <span>{filter}</span>
      </div>
    </div>
  </div>
  <div id="sample_list">
  {% for sample in samples %}
    <div class="row">
      {% if edit %}
      <div class="overview-firstcol">
        <input id="{{ sample.id }}" type="checkbox" {% if sample.in_dataset %} checked {%endif %}/>
      </div>
      {% endif %}
      <div class="overview-datacolumn">
        {{ sample.id }}
      </div>
      <div class="overview-datacolumn">
        {{ sample.name }}
      </div>
      <div class="overview-datacolumn">
        {{ sample.species }}
      </div>
      <div class="overview-datacolumn">
        {{ sample.country.termName }}
      </div>
      <div class="overview-datacolumn">
        {{ sample.source_type.termName }}
      </div>
      <div class="overview-datacolumn">
        {{ sample.year }}
      </div>
      <div class="overview-datacolumn">
        {{ sample.sequence_type }}
      </div>
    </div>
  {% endfor %}
</div>
{% endblock %}

{% block footer %}
  {% if edit %}
    <script src="/static/main/update_mongoids.js"></script> 
  {% endif %}
{% endblock %}

